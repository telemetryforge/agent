[Unit]
Description=Telemetry Forge Agent is an enterprise-hardened distribution of Fluent Bit
Documentation=https://fluent.do/
Requires=network.target
After=network.target

[Service]
Type=simple
EnvironmentFile=-/etc/sysconfig/@FLB_OUT_NAME@
EnvironmentFile=-/etc/default/@FLB_OUT_NAME@
ExecStart=@CMAKE_INSTALL_FULL_BINDIR@/@FLB_OUT_NAME@ -c @CMAKE_INSTALL_SYSCONFDIR@/@FLB_OUT_NAME@/@FLB_OUT_NAME@.conf
ExecReload=/bin/kill -HUP $MAINPID
# Allow for infinite restarts
Restart=on-failure
# Wait 5 second between restarts rather than 100ms
RestartSec=5s

[Install]
WantedBy=multi-user.target
